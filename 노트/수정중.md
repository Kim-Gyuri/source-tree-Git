# 📌 소스트리(source tree) 를 사용하여 Git 사용하기
## commit 전 수정사항 취소하기(discard)
+ 만약 소스코드를 수정을 하는 중에 문제를 발견했다.
+ 조건: commit을 하기 직전의 상황만 가능
+ discard하면, 가장 최근 commit으로 돌아가기 할 수 있다.


## Reset, Revert, 시간여행 정리
> `reset` 선택한 상태로 되돌리기 /버전을 지운다. <br> 
> `revert` 선택한 상태를 취소해서, 그 이전 상태로 되돌리기 /버전을 유지하면서 되돌린 버전으로 커밋을 만들어 준다.

### reset
+ 되돌아갈 버전을 선택하고 마우스 오른쪽 버튼을 클릭하고 "Reset current branch  to this commit"을 누른다.
+ Reset to Commit 창이 아래와 같이 뜬다. 
+ 여기서 3가지의 mode가 있다. Soft, Mixed, Hard.
+ 원하는 mode를 선택 후 OK를 클릭한다.

> `Hard mode` <br> Reset한 버전이후의 버전이 모두 삭제되며 소스코드 역시 해당 버전의 소스코드로 수정되어있다.

> `Mixed mode` <br> Reset한 버전이후의 버전이 모두 삭제되었으나 working tree의 소스코드는 유지되어 Uncommitted changes 항목이 표시되어있다. <br> 또한 소스코드 역시 그대로 유지되어 있다.

<br> <br>

### revert 
+ 바로 이전 커밋의 파일 내용을 되돌리되, 되돌리는 커밋을 함께 날려서 파일 내용을 롤백한다.
+ `주의` revert하려는 커밋위치 이후의 커밋이 있으면 안된다 → 충돌 발생!
+ 그럼 여러개의 커밋 이전의 커밋에 revert하고 싶다면?  맨 위 커밋부터 차근차근 내려와야 한다.

## 브랜치
+ 각각의 브랜치는 다른 브랜치의 영향을 받지 않기 때문에, 여러 작업을 동시에 진행할 수 있다.
+ 브랜치 전환 : 소스트리에서 더블클릭

### 병합
병합(Merge)함으로써, 작업한 내용을 다시 새로운 하나의 브랜치로 모을 수 있다. 
+ 새로운 브랜치를 만들고, 브랜치를 커밋한다.
+ 커밋한 브랜치에서 master로 돌아온다.
+ 새로운 브랜치에 마우스를 올려 "merge '브랜치이름' into current brance"를 해주면 된다.
+ 이제 브랜치에서 커밋한 내용이 master에도 같이 들어가 있다.

### 충돌
> 충돌이 있는 부분에 Git 이 자동으로 위와 같이 충돌 정보를 포함하여 파일 내용을 변경한다. <br> 이 내용을 통해 어떤 브랜치에서 어떤 부분이 충돌되었는지 확인할 수 있다. <br>
> 충돌이 일어난 부분은 이렇게 일일이 확인해서 수정해 주어야 한다.

<br>

 + 실험3를 마스터 쪽으로 옮겨오고 싶은 것이기 때문에, <br> 마스터 상태에서, 실험3에 마우스로 "merge 실험3 into current brance" 오른쪽 클릭한다.
 + 충돌이 발생한다.  <br> 2개의 서로 다른 브랜치가 1개의 파일 안에서 변경한 상황이라 충돌이 발생했다.
 + 사람이 처리하도록 위임하는 경고창이 뜬다.

```
# merge를 했을 때 이렇게 표시된다.

<<<<<<< HEAD
브랜치
=======
branch
>>>>>>> 실험
```

### 충돌 해결
+ 코드로 돌아가면, merge했을 때 충돌한 사항을 표시해준다.
+ 코드 수정후,  sourceTree로 가서 Uncommitted changes를 눌러 <br> Unstaged files에서 해당 파일을, resolve conflicts에서 Mark Resolved를 누른다. <br> 그러면 자동으로 커밋 메시지가 작성된다. 

> merge했을 때, 경고창이 뜨면서 해당 파일에 아래와 같이 표시가 생긴다.
> ![브랜치](https://user-images.githubusercontent.com/57389368/195360945-30c30d84-5140-493c-813a-1170770fce54.JPG) <br>


### 충돌 최소화
+ "마스터" 브랜치 내용을 "실험3" 브랜치로 가져올 것이다.
+ (언젠가는 실험3는 마스터로 결합될 브랜치다.)
+ ("마스터" 브랜치 변화를 계속해서 "실험3" 브랜치로 가져오다 보면, <br> 나중에 실험3를 마스터로 병합했을 때 충돌 최소화할 수 있다.)
+ 실험3 위치에서 마스터 브랜치에 오른쪽 마우스로 merge한다.
+ 이렇게 되면, 실험3에 마스터 브랜치 내용을 가져오게 된다.

<br>

계속해서 마스터 브랜치 추가한다면, 실험 3에서 돌아와, 마스터를 merge했을 때 충돌발생한다.
> 충돌발생 했을 때, 코드에 아래와 같이 표시가 생긴다.
```
<ul>
    <li>Git introduction</li>
    <li>version</li>
    <li>브랜치</li>
    <li>conflict</li>
    <li>conflict resolve</li>
    <li>원격 저장소</li>
    <li>충돌입니다.</li>
<<<<<<< HEAD
    <li>충돌 해결</li>
=======
    <li>원격 저장소도 배운다.</li>
>>>>>>> master
</ul>
```

<br>

+ 코드를 고치고 커밋하면 된다. 
+ 이때 Resolve Conflicts(자동으로 편집해주는 기능)가 있는데, 
```
Resolve Using "Mine"     : 나의 브랜치에 있던 내용을 채택한다.
Resolve Using "Theirs"  : 나의 브랜치에 있던 내용을 삭제하고, master 브랜치 내용을 채택한다.

수동으로 편집하는 건 "Mark Resolved"다.
```

<br> 

이렇게 해서 계속해서 "master" 브랜치 변화를 "실험3" 브랜치가 수용하면서, 실험3에서 작업을 진행하면 된다.
+ 이제 실험3에서 새로운 내용을 커밋하고,
+ 마스터 브랜치로 돌아온다.
+ "실험3" 브랜치를 클릭하고 "merge 실험3 into current branch" 해준다. 이때 충돌이 발생하지 않았다. (발생했더라도 작은 충돌이 발생한다.)

<br>

다시 설명하자면, <br>
![브랜치 충돌](https://github.com/Kim-Gyuri/source-tree-Git/assets/57389368/8dd22e53-e022-435c-9610-01b871c80be5) <br>

+ master 브랜치와 실험3 브랜치가 변화하다가 갑자기 실험3을 master로 옮기는게 아니라,
+ 정기적으로 master 브랜치 내용을 실험3에 변화를 정기적으로 가져오면, 나중에 충돌발생 하더라도 충돌 최소화가 된다.
+ 실험3를 병합하더라도 충돌이 최소화된 것이다. 
